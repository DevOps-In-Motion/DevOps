version: v2
# 'clean', when set to true, deletes the directories, zip files, and/or jar files specified in the
# `out` field for all plugins before running code generation.
clean: true
managed:
  enabled: true
plugins:
  # protoc-gen-go is the standard code generator for generating Go language bindings from .proto files.
  # It outputs Go structs/types and gRPC service interfaces for use in Go applications.
  - local: protoc-gen-go
    out: gen
    opt: paths=source_relative
  # protoc-gen-connect-go is the code generator for creating Connect and gRPC service/client stubs for Go.
  # It produces strongly typed interfaces and structures to enable RPC support using the Connect protocol in Go applications.
  - local: protoc-gen-connect-go
    out: gen
    opt:
      - paths=source_relative
      - simple
  # OpenAPI/Swagger documentation
  - remote: buf.build/grpc-ecosystem/openapiv2
    out: gen/openapi
    opt:
      - allow_merge=true
      - merge_file_name=api
  # Validation rules
  - remote: buf.build/bufbuild/validate-go
    out: gen/go
    opt:
      - paths=source_relative